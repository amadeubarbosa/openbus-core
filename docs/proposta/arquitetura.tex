\section{Arquitetura}
\label{arquitetura}

O \openbus é um barramento de serviços que tem como principais objetivos
oferecer uma arquitetura aberta e extensível a diferentes domínios,
que permita a troca de dados estruturados e adequados a esses domínios
e que seja compatível com múltiplas linguagens.
Assim como o OpenSpirit, o OpenBus é baseado no {\em middleware} CORBA
e em alguns dos serviços padronizados para sua arquitetura.

O barramento do \openbus é formado por componentes que podem oferecer
serviços ou podem apenas consultar serviços de outros componentes.
A infraestrutura básica do \openbus provê alguns serviços que podem ser
oferecidos por um único componente ou podem estar
distribuídos em diversos componentes em diferentes máquinas.
A medida que as aplicações se conectam ao barramento, o espaço
de serviços que o \openbus oferece cresce. 
Desta forma, o \openbus pode ser estendido com serviços para acesso a
repositórios de dados, acesso a dados de uma aplicação, etc.

\begin{figure} [htb]
\centering
\includegraphics[width=14cm]{figs/arquitetura.pdf} %height=3in, 
\caption{Arquitetura do \openbus}
\label{fig:architecture}
\end{figure}

Qualquer aplicação que queira fazer parte do barramento deve
implementar um componente para o \openbus. Através desse componente
é possível acessar todos os serviços existentes no barramento.
Para isso, o componente deve ser capaz de se conectar ao barramento e se
autenticar.
Através dos serviços oferecidos pelo \openbus, o componente pode acessar
um serviço previamente conhecido, ou pode consultar o serviço de
localização para descobrir qual componente oferece o serviço que ele
deseja acessar.
Para oferecer um serviço, uma aplicação pode usar o mesmo componente ou
implementar outro. Tal componente deve ser capaz de publicar no
barramento a interface do serviço que deseja oferecer.

%Qualquer aplicação que queira acessar um serviço deve ser
%capaz de se conectar ao barramento e se autenticar.
%Além disso, para oferecer um serviço ao barramento, uma aplicação 
%deve ser capaz de publicar a
%interface do serviço que deseja oferecer.
%%%% A aplicação já virou componente e ainda não falamos da diferença
%%%% entre eles.
%Através dos serviços oferecidos pelo \openbus, o componente pode acessar
%um serviço previamente conhecido, ou pode consultar o serviço de
%localização para descobrir qual componente oferece o serviço que ele
%deseja acessar.

\subsection{Serviços básicos}

Entre os serviços básicos oferecidos pelo \openbus podemos destacar os
serviços de autenticação, localização, troca de mensagens e colaboração.

\begin{itemize}
%%%%%%%%%%
\item Serviço de autenticação 
%%%%%%%%%%

Para fazer parte do barramento, um componente deve se autenticar a ele.
Existem {\em tipicamente} duas formas de autenticação para um
componente. Uma onde o componente usa a credencial de um usuário e outra
onde o componente (ou aplicação) possui uma credencial própria.

Aplicações como o VGE, onde o usuário fornece seu identificador e sua
senha, podem usar a própria credencial do usuário para 
autenticar seus componentes no barramento.
Já as aplicações que executam como um {\em daemon} podem utilizar uma
credencial própria.

Como apenas um componente do barramento pode acessar serviços de outro
componente e todos os componentes do barramento já foram autenticados,
os componentes do barramento são considerados confiáveis.
Entretanto, cabe a cada serviço verificar se um componente possui a
devida autorização para acessar seus serviços.

%%%%%%%%%%
\item Serviço de localização 
%%%%%%%%%%

O serviço de localização é baseado no serviço de {\em trading} de 
CORBA. Este serviço facilita a oferta e o descobrimento de instâncias de
serviços de tipos específicos.
Com este serviço, componentes podem publicar suas características
e outros componentes podem encontrar os serviços desejados
através das características publicadas.

Para publicar um serviço, um componente provê ao serviço de localização
uma descrição de seu serviço e a localização de onde este serviço está
disponível. Para encontrar um serviço, um componente pergunta ao serviço
de localização se existe algum serviço com determinadas características.
O serviço de localização procura entre as descrições que possui e
responde com a localização da interface do serviço selecionado.
O componente que solicitou o serviço pode então acessar o serviço
desejado.

%%%%%%%%%%
\item Serviço de troca de mensagens
%%%%%%%%%%

- troca de dados e mensagens entre (as aplicações) os componentes

%\begin{figure} [htb]
%\centering
%\includegraphics[width=8cm]{figs/eventos.pdf} %height=3in, 
%\caption{Troca de mensagens}
%\label{fig:datachange}
%\end{figure}

%%%%%%%%%%
\item Serviço de colaboração
%%%%%%%%%%

Através do serviço de colaboração, um componente pode criar uma seção de
colaboração, onde ele define quem são os componentes participantes.
Inicialmente, cada componente é convidado pelo serviço de colaboração
a fazer parte desta seção.

Cada seção de colaboração possui atributos específicos e pode envolver
mais de um tipo de aplicação de diferentes usuários.
Por exemplo, para uma colaboração entre diferentes instâncias 
do VGE, os atributos podem ser ...
Através de uma seção, os componentes envolvidos podem compartilhar
diferentes tipos de eventos, como por exemplo, eventos de interação
de usuário (seleção e alteração de dados, movimentação de cursor). Cada
componente pode gerar e receber esses eventos.

O serviço de colaboração é baseado no serviço de notificação de CORBA.

\end{itemize}

