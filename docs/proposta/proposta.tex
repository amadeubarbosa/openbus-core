\section{Proposta}
\label{proposta}

Conforme apresentamos na seção anterior, duas ferramentas de mercado objetivam
 a integração de aplicações da área de E\&P, OpenSpirit e PowerHub.
Entretanto, nenhuma das duas pode ser adotada como ferramenta de integração das
 aplicações de E\&P da Petrobras.
No caso do OpenSpirit, a razão técnica que inviabiliza sua adoção é o fato
 desta ferramenta não permitir a criação de um provedor de dados, o que
 significa que não é possível disponibilizar em seu barramento os dados das
 várias bases de dados e aplicações próprias da Petrobras.
Já no caso do PowerHub, há duas questões técnicas impeditivas: o fato desta
 ferramenta não prover suporte para troca dados---que é o objetivo principal da
 integração desejada---e o fato de estar restrita à linguagem Java.

Pelo lado não técnico, adotar uma ferramenta de mercado como infra-estrutura de
 integração das bases de dados e das aplicações de E\&P também pode não ser
 desejável.
Usar uma ferramenta de mercado significa criar uma dependência significativa,
 no sentido de que todas as aplicações que forem integradas passam a conter
 código específico dessa ferramenta.
Mais do que isso, todo o fluxo de trabalho dos profissionais passa a depender
 do uso dessa infra-estrutura.
Assim, abandonar essa ferramenta no futuro significaria despender um grande
 esforço, tanto na atualização das aplicações quanto em função do
 comprometimento dos fluxos de trabalho.
Motivos possíveis para uma eventual interrupção do uso são o aumento dos custos
 das linceças, a descontinuidade da ferramenta por parte do fabricante ou mesmo
 a inadequação, tendo em vista que o fabricante só incorpora funcionalidades
 que julga conveniente ao produto.
Como exemplos de inadequação, podemos citar o fato do OpenSpirit não permitir
 a colaboração entre aplicações de diferentes usuários e a possibilidade de não
 contemplar um determinado tipo de dado necessário ao ambiente da Petrobras.

Em função dessas questões, nós propomos a construção de uma nova arquitetura de
 integração de aplicações, baseada em um barramento, própria da Petrobras, que
 chamamos de \openbus.
Com uma arquitetura própria, todos os requisitos relevantes do ambiente da
 Petrobras poderão ser contemplados.
Além disso, a arquitetura poderá ser mantida e estendida, de modo a contemplar
 novos requisitos que vejam a surgir, se adequando às necessidades futuras.

O desenvolvimento de uma arquitetura de integração e sua adoção nas aplicações
 representa uma tarefa de esforço considerável.
A infra-estrutura, envolvendo o servidor e os serviços básicos a serem
 providos, é complexa e a construção das pontes que ligam cada aplicação ao
 barramento envolvem conhecimentos específicos destas aplicações.
Em função do esforço não ser pequeno, é importante que o ponto de partida deste
 trabalho seja:
\begin{enumerate}
\item O levantamento dos requisitos a serem contemplados pela arquitetura.
\item A definição das tecnologias a serem empregadas na implementação.
\end{enumerate}

Na elaboração desta proposta, definimos os seguintes requisitos para o
 \openbus:

\begin{description}
\item [Arquitetura aberta e extensível a diferentes domínios.] O E\&P abrange
 várias áreas de conhecimento além de geologia e geofísica. Além disso,
 considerando a empresa inteira, há inúmeras áreas nas quais a existência de
 uma arquitetura de integração de aplicações seria de grande valia. Assim, um
 dos requisitos do \openbus é que ele seja flexível para atender diferentes
 domínios. Por exemplo, deve ser possível montar um integrador de aplicações
 de engenharia reaproveitando toda a infra-estrutura e os serviços básicos que
 serão desenvolvidos inicialmente para aplicar em geologia e geofísica.
\item [Dados estruturados e adequados ao domínio.] É importante que os dados
 sejam modelados de forma estruturada e de acordo com o domínio para permitir
 que as aplicações naveguem por estes dados, encontrem e recuperem as
 informações desejadas. Esse requisito é fundamental para permitirmos que dados
 de grandes volumes possam ser utilizados. Por exemplo, um volume sísmico deve
 ser visto conforme sua estrutura lógica, dividido em atributos, {\em inlines}
 e {\em crosslines}, ao invés de uma mera seqüência de bytes, como armazenado
 em um arquivo no formato {\em seg-y}.
\item [Compatível com múltiplas linguagens.] Para integrar de forma nativa e,
 em decorrência, eficiente as aplicações próprias da Petrobras, é necessário
 que o \openbus seja independente de linguagem de programação, pois há várias
 aplicações escritas em C, C++, Java, .NET etc. Deve ser possível conectar
 todas essas aplicações ao barramento.
\item [Facilidade para criação de clientes.] A exemplo do que é feito pelo
 OpenSpirit, é interessante prover bibliotecas, nas principais linguagens de
 desenvolvimento, que facilitem a construção de pontes ligando aplicações ao
 barramento. Esse requisito é importante para permitir que os próprios
 programadores das aplicações possam conectá-las ao ambiente integrador.
\item [Facilidade para criação de servidores de dados.] É fundamental que
 possamos disponibilizar no barramento os dados de qualquer banco ou aplicação
 própria da Petrobras. Assim viabilizamos o maior grau de integração possível
 entre as diferentes aplicações.
\item [Troca de dados e mensagens entre as aplicações.] A troca de dados entre
 as aplicações é o objetivo principal da arquitetura de integração. Porém, a
 troca de mensagens genéricas, de forma síncrona e assíncrona, permite aumentar
 significativamente as possibilidades de integração entre essas aplicações.
\item [Eficiência da troca de grandes volumes de dados.] Os dados sísmicos são
 da ordem de grandeza de centenas de Gigabytes e precisam ser trocados entre as
 aplicações dos domínios de geologia e geofísica. A transferência desses
 dados não devem apenas ser permitida mas deve ser o mais eficiente possível.
\item [Escalabilidade na troca de grandes volumes de mensagens.] A troca de
 mensagens, con\-for\-me apresentamos, flexibiliza as funcionalidades
 decorrentes da integração. Por exemplo, através da troca de mensagens, duas
 aplicações podem sincronizar alterações simultâneas sendo feitas em um mesmo
 dado que seja visualizado em ambas. Esse tipo de uso pode exigir grandes
 volumes de mensagens e a arquitetura deve dar suporte, sem degradação de
 desempenho do sistema.
\item [Suporte a mecanismos de autenticação e autorização.] Em praticamente
 qualquer área da Petrobras, a segurança da informação é premente. O \openbus
 deve, então, dar suporte para que a autenticação dos usuários e a autorização
 de acesso a dados e serviços sejam feitos conforme necessário.
\item [Suporte ao trabalho colaborativo.] A integração de aplicações para a
 troca de dados, aliada à troca de mensagens que citamos acima formam uma base
 para o trabalho colaborativo entre usuários. A arquitetura pode, então,
 oferecer os serviços básicos, no nível de abstração adequado, para as
 aplicações que desejem explorar a colaboração.
\end{description}

Especificados os requisitos, passamos à definição das tecnologias a serem
 utilizadas na implementação do \openbus.
A construção de um barramento comum através do qual aplicações possam se
 conectar para trocar dados e mensagens, como descrevemos, já sugere uma
 abordagem baseada em serviços, ou um SOA.
Uma arquitetura SOA atende à solução que propomos por garantir um alto grau
 de desacoplamento entre os membros do barramento, viabilizando a integração
 de aplicações heterogêneas, e por não implicar em uma tecnologia específica
 para sua implementação, nos permitindo adotar uma que atenda aos requisitos
 funcionais, ainda considerando desempenho e escalabilidade.
Além de atender aos requisitos técnicos específicos, a adoção de uma
 arquitetura orientada a serviços também atende às diretrizes estabelecidas
 pela {\bf colocar aqui o nome gerência de arquitetura} em \cite{petrobras}.

Com base nos requisitos levantados, a tecnologia que julgamos mais adequada à
 implementação do \openbus é CORBA.
Como apresentamos na Seção \ref{CORBA}, CORBA possui todos os requisitos para
 uma implementação SOA.
Além disso, oferece suporte para descrição clara e sucinta das interfaces dos
 serviços, à construção de componentes em múltiplas linguagens, à mensageria, à
 implementação de mecanismos de autenticação e ao acesso, via referências, a
 objetos remotos que podem preservar estado.
Por fim, CORBA possibilita um desempenho muito superior quando comparado com as
 tecnologias que adotam comunicação baseada em XML.

Na próxima seção, nós apresentamos a arquitetura proposta para o \openbus,
 descrevendo suas macro-funcionalidades e os serviços básicos que estarão
 disponíveis para as aplicações.
