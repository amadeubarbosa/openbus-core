%
%  Documento de Instalação do OpenBus 2.0
%
%  Created by Hugo Roenick on 2012-05-22.
%  Copyright (c) 2012 Tecgraf/PUC-Rio. All rights reserved.
%
\documentclass[]{article}

% Use utf-8 encoding for foreign characters
\usepackage[latin1]{inputenc}

\usepackage[brazil]{babel}

% Setup for fullpage use
\usepackage{fullpage}

% Uncomment some of the following if you use the features
%
% Running Headers and footers
%\usepackage{fancyhdr}

% Multipart figures
%\usepackage{subfigure}

% More symbols
%\usepackage{amsmath}
%\usepackage{amssymb}
%\usepackage{latexsym}

\usepackage{hyperref}

% Surround parts of graphics with box
\usepackage{boxedminipage}

% Package for including code in the document
\usepackage{../mwlabinputs2}

% If you want to generate a toc for each chapter (use with book)
\usepackage{minitoc}

% This is now the recommended way for checking for PDFLaTeX:
\usepackage{ifpdf}

%% Redefines the label 'Listing' for ..
\def\lstlistingname{Código}
\codestyle{colorful}

% new commands
\newcommand{\term}[1]{\textit{#1}}
\newcommand{\code}[1]{\texttt{#1}}

\newcommand{\openbus}{\textsc{OpenBus}}
\newcommand{\corba}{\textsc{CORBA}}
\newcommand{\orb}{\textsc{ORB}}
\newcommand{\scs}{\textsc{SCS}}
\newcommand{\lua}{\textsc{Lua}}
\newcommand{\oil}{\textsc{OiL}}
\newcommand{\version}{2.0.0}


%\newif\ifpdf
%\ifx\pdfoutput\undefined
%\pdffalse % we are not running PDFLaTeX
%\else
%\pdfoutput=1 % we are running PDFLaTeX
%\pdftrue
%\fi

\ifpdf
\usepackage[pdftex]{graphicx}
\else
\usepackage{graphicx}
\fi

\title{Manual de instalação do \openbus{} \version{}}
\author{TecGraf}

\date{\today}

\begin{document}

\ifpdf
\DeclareGraphicsExtensions{.pdf, .jpg, .tif}
\else
\DeclareGraphicsExtensions{.eps, .jpg}
\fi

\maketitle

\tableofcontents

\section{Introdução}

Este documento visa informar apenas o procedimento necessário para instalar um barramento \openbus{}~\cite{web:OPENBUS} da versão \version{}.
Caso tenha interesse de entender melhor o que é um barramento \openbus{}, consulte o seu manual de referência~\cite{ob2.0core}.

\section{Instalação}

O primeiro para instalar o barramento deve ser descompactar o pacote do barramento da plataforma desejada.
Os pacotes oficialmente suportados estão disponibilizados no site oficial do projeto: \url{www.tecgraf.puc-rio.br/openbus}.
As plataformas oficialmente suportadas são:
\begin{itemize}
  \item Solaris 10 release 8/07 SPARC 64 bits (SunOS510\_64)
  \item Solaris 10 release 8/07 SPARC 32 bits (SunOS510)
  \item Linux Kernel 2.6 glibc 2.5 64 bits (Linux26g4\_64)
  \item Linux Kernel 2.6 glibc 2.5 32 bits (Linux26g4)
  \item Linux Kernel 2.4 glibc 2.3 64 bits (Linux24g3\_64)
  \item Linux Kernel 2.4 glibc 2.3 32 bits (Linux24g3)
\end{itemize}

Para executar o barramento deve-se seguir o seguinte procedimento:

\begin{enumerate}
  \item Extrair o pacote.
  Para fins de legibilidade, vamos guardar o caminho do local da extração em uma variável de ambiente. 
  Porém, \textbf{essa declaração não é obrigatória!}
\begin{verbatim}  
export OPENBUS_HOME=<local de extracao do pacote>
\end{verbatim}
  
  \item Testar se a execução do binário do barramento esta funcionando
\begin{verbatim}  
$OPENBUS_HOME/bin/busservices --help
\end{verbatim}

  \item Gerar um par de chaves com tamanho de 2048 bits para o barramento.
  A chave privada (arquivo com terminação \emph{.key}) deve ser do formato PKCS8 codificada em DER, e o certificado (arquivo com terminação \emph{.crt}) deve ser do formato X.509 codificado em DER.
  Esse par de chaves pode ser criado utilizando o script \emph{openssl-generate.ksh}.
\begin{verbatim}
cd ${OPENBUS_HOME} && ./bin/openssl-generate.ksh -n <nome do par de chaves>
\end{verbatim}

  \item Executar o barramento passando as configurações desejadas. Como por exemplo, o par de chaves do barramento.

\end{enumerate}

Maiores informações sobre a como utilizar a configuração do \emph{busservices} podem ser encontradas no manual de referência~\cite{ob2.0core}.

\section{Configuração do validador LDAP}

O validador LDAP tem suporte a servidores Microsoft Active Directory e OpenLDAP. As configurações do validador precisam estar no arquivo de configuração que é informado ao \emph{busservices} através do parâmetro ``-configs''. A seguir apresentamos quais são as propriedades, seu significado e possíveis valores:
\begin{description}
\item[ldap\_servers] indica uma lista de URLs de servidores LDAP. Cada URL deve seguir o formato \\ \texttt{<protocol>://<server>:<port>}, onde \texttt{<protocol>} pode ser \texttt{ldaps} ou \texttt{ldap}. Exemplo:
\begin{verbatim}
ldap_servers = { 
 "ldaps://server.mycompany.com",
 "ldap://otherserver.mycompany.com:389",
}
\end{verbatim}

\item[ldap\_patterns] indica uma lista de padrões de formação de nomes que serão usados na autenticação LDAP. Atualmente só há suporte para o padrão \texttt{\%U}, e o validador irá substituir esse padrão pelo nome do usuário fornecido no ato do login. No exemplo abaixo apresentamos dois padrões, o primeiro é útil para autenticação em servidores Microsoft Active Directory (que utilizam UPN \cite{web:upn}) e o segundo é útil para autenticação em servidores OpenLDAP (que utilizam DN \cite{web:dn,web:rfc4514}). Exemplo:
\begin{verbatim}
ldap_patterns = {
  "%U@project.mycompany.com",
  "cn=%U,ou=users,ou=groups,dc=company",
}
\end{verbatim}

\item[ldap\_timeout] indica um tempo máximo de espera (em segundos) da resposta do servidor LDAP. Exemplo:
\begin{verbatim}
ldap_timeout = 10
\end{verbatim}
\end{description}

\section{FAQ}

\subsection{Ainda estou com dúvidas. Como entro em contato?}

Disponibilizamos uma lista pública de discussão com o intuito de reconhecer os usuários da nossa tecnologia, bem como receber sugestões e críticas que contribuam para a evolução do nosso projeto.

Maiores informações sobre a nossa lista de discussão veja \url{http://listas.tecgraf.puc-rio.br/mailman/listinfo/openbus-users}.

\bibliographystyle{plain}
\bibliography{../references}

\end{document}
