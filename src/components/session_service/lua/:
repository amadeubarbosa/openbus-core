require "OOP"

require "SessionService"

SessionServiceComponent = Object:new{
    facets = {},

    facetsByName = {},

    startup = function(self)
        local sessionService = SessionService:new()
        local sessionServiceInterface = "IDL:SCS/SS/SessionService:1.0"
        sessionService = oil.newobject(sessionService, sessionServiceInterface)
        self.facets[sessionServiceInterface] = sessionService
        self.facetsByName["sessionService"] = sessionService

        accessControlService = {}
        local credential = accessControlService:login()

        local registryServiceComponent = accessControlService:getRegistryService(credential)
        local registryService = registryServiceComponent:getFacetByName("registryService")
        local serviceOffer = {
            description = "",
            type = "",
            iComponent = self,
        }

        local identifierResource = registryService:register(serviceOffer);
    end,

    shutdown = function(self)
        self.facets = {}
        self.facetsByName = {}
    end,

    getFacet = function(self, facet_interface)
        return self.facets[facet_interface]
    end,

    getFacetByName = function(self, facet)
        return self.facetsByName[facet]
    end,
}
